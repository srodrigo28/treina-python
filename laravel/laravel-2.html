<!doctype html>
<html lang="pt-BR">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Tutorial: Laravel CRUD & DB</title>

    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://unpkg.com/lucide@latest"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        base: "var(--color-base)",
                        accent: "var(--color-accent)",
                        text: "var(--color-text)",
                        muted: "var(--color-muted)",
                        card: "var(--color-card)",
                        border: "var(--color-border)",
                    },
                    animation: {
                        'slide-up': 'slideUp 0.5s ease-out forwards',
                        'fade-in': 'fadeIn 0.5s ease-out forwards',
                    },
                    keyframes: {
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        },
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        }
                    }
                },
            },
        };
    </script>
    <style>
        :root {
            --color-base: #0f172a;
            --color-accent: #ef4444; /* Laravel Red */
            --color-text: #f8fafc;
            --color-muted: #94a3b8;
            --color-card: #1e293b;
            --color-border: #334155;
        }

        .bg-pattern {
            background-image:
                radial-gradient(circle at 1px 1px, rgba(255, 255, 255, 0.05) 1px, transparent 0),
                radial-gradient(circle at 20px 20px, rgba(239, 68, 68, 0.05) 1px, transparent 0);
            background-size: 32px 32px, 32px 32px;
        }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: var(--color-base); }
        ::-webkit-scrollbar-thumb { background: var(--color-border); border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--color-accent); }

        pre {
            background-color: #0d1117;
            padding: 1rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            border: 1px solid var(--color-border);
            margin: 0;
        }

        code {
            font-family: 'Fira Code', 'Courier New', monospace;
            font-size: 0.875rem;
            color: #e2e8f0;
        }

        .step-content { display: none; }
        .step-content.active { display: block; animation: fadeIn 0.4s ease-in-out; }

        .nav-item.active {
            background-color: var(--color-accent);
            color: white;
            border-color: var(--color-accent);
        }

        /* PHP Syntax Highlighting Fake */
        .php-tag { color: #f87171; }
        .func { color: #60a5fa; }
        .str { color: #a3e635; }
        .var { color: #c084fc; }
        .comment { color: #64748b; font-style: italic; }
        .class { color: #fbbf24; }
    </style>
</head>

<body class="min-h-screen bg-base text-text bg-pattern flex flex-col md:flex-row overflow-hidden font-sans">

    <aside class="w-full md:w-72 bg-card border-r border-border flex flex-col h-auto md:h-screen z-10 shadow-xl">
        <div class="p-6 border-b border-border bg-base/50 backdrop-blur-sm">
            <div class="flex items-center gap-2 mb-1">
                <i data-lucide="database-zap" class="text-accent w-6 h-6"></i>
                <h1 class="text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-red-500 to-orange-500">
                    Laravel Lv.2
                </h1>
            </div>
            <p class="text-xs text-muted">MVC, Database & CRUD</p>
        </div>

        <nav class="flex-1 overflow-y-auto p-4 space-y-2">
            
            <button onclick="showStep('step-intro')" class="nav-item w-full text-left px-4 py-3 rounded-lg border border-transparent hover:bg-white/5 transition flex items-center gap-3 active group">
                <span class="grid place-items-center w-6 h-6 rounded bg-white/10 text-xs font-mono group-hover:bg-white/20 transition">0</span>
                <span>O Plano</span>
            </button>

            <div class="pt-4 pb-2 px-4 text-xs font-bold text-muted uppercase tracking-wider flex items-center gap-2">
                <i data-lucide="code" class="w-3 h-3"></i> Estrutura
            </div>

            <button onclick="showStep('step-controller')" class="nav-item w-full text-left px-4 py-3 rounded-lg border border-transparent hover:bg-white/5 transition flex items-center gap-3 group">
                <span class="grid place-items-center w-6 h-6 rounded bg-white/10 text-xs font-mono group-hover:bg-white/20 transition">1</span>
                <span>Controller & Rotas</span>
            </button>

            <button onclick="showStep('step-blade')" class="nav-item w-full text-left px-4 py-3 rounded-lg border border-transparent hover:bg-white/5 transition flex items-center gap-3 group">
                <span class="grid place-items-center w-6 h-6 rounded bg-white/10 text-xs font-mono group-hover:bg-white/20 transition">2</span>
                <span>Views com Blade</span>
            </button>

            <div class="pt-4 pb-2 px-4 text-xs font-bold text-muted uppercase tracking-wider flex items-center gap-2">
                <i data-lucide="server" class="w-3 h-3"></i> Banco de Dados
            </div>

            <button onclick="showStep('step-mysql')" class="nav-item w-full text-left px-4 py-3 rounded-lg border border-transparent hover:bg-white/5 transition flex items-center gap-3 group">
                <span class="grid place-items-center w-6 h-6 rounded bg-white/10 text-xs font-mono group-hover:bg-white/20 transition">3</span>
                <span>Configurando MySQL</span>
            </button>

            <button onclick="showStep('step-migration')" class="nav-item w-full text-left px-4 py-3 rounded-lg border border-transparent hover:bg-white/5 transition flex items-center gap-3 group">
                <span class="grid place-items-center w-6 h-6 rounded bg-white/10 text-xs font-mono group-hover:bg-white/20 transition">4</span>
                <span>Migration (Tabela)</span>
            </button>

            <button onclick="showStep('step-seeder')" class="nav-item w-full text-left px-4 py-3 rounded-lg border border-transparent hover:bg-white/5 transition flex items-center gap-3 group">
                <span class="grid place-items-center w-6 h-6 rounded bg-white/10 text-xs font-mono group-hover:bg-white/20 transition">5</span>
                <span>Seeds (Dados Fakes)</span>
            </button>

            <div class="pt-4 pb-2 px-4 text-xs font-bold text-muted uppercase tracking-wider flex items-center gap-2">
                <i data-lucide="cpu" class="w-3 h-3"></i> Lógica
            </div>

            <button onclick="showStep('step-crud')" class="nav-item w-full text-left px-4 py-3 rounded-lg border border-transparent hover:bg-white/5 transition flex items-center gap-3 group">
                <span class="grid place-items-center w-6 h-6 rounded bg-white/10 text-xs font-mono group-hover:bg-white/20 transition">6</span>
                <span>CRUD Upsert</span>
            </button>

            <button onclick="showStep('step-features')" class="nav-item w-full text-left px-4 py-3 rounded-lg border border-transparent hover:bg-white/5 transition flex items-center gap-3 group">
                <span class="grid place-items-center w-6 h-6 rounded bg-white/10 text-xs font-mono group-hover:bg-white/20 transition">7</span>
                <span>Busca & Check</span>
            </button>

            <button onclick="showStep('step-pagination')" class="nav-item w-full text-left px-4 py-3 rounded-lg border border-transparent hover:bg-white/5 transition flex items-center gap-3 group">
                <span class="grid place-items-center w-6 h-6 rounded bg-white/10 text-xs font-mono group-hover:bg-white/20 transition">8</span>
                <span>Paginação</span>
            </button>
        </nav>
    </aside>

    <main class="flex-1 h-screen overflow-y-auto p-6 md:p-12 relative scroll-smooth">
        <div class="max-w-4xl mx-auto pb-20">

            <div id="step-intro" class="step-content active space-y-8 animate-fade-in">
                <div class="border-b border-border pb-6">
                    <span class="text-accent text-sm font-bold tracking-wider uppercase flex items-center gap-2 mb-2">
                        <span class="w-2 h-2 rounded-full bg-accent animate-pulse"></span> Módulo 2
                    </span>
                    <h2 class="text-4xl md:text-5xl font-extrabold tracking-tight text-white mb-4">Mãos na Massa</h2>
                    <p class="text-lg text-muted leading-relaxed max-w-2xl">
                        Vamos construir um Gerenciador de Tarefas completo. Você vai aprender a manipular dados, criar interfaces bonitas com Blade e configurar o banco de dados.
                    </p>
                </div>

                <div class="bg-base/50 border border-border p-4 rounded-xl flex items-center justify-between">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 rounded-full bg-orange-500/20 flex items-center justify-center text-orange-400">
                            <i data-lucide="book" class="w-5 h-5"></i>
                        </div>
                        <div>
                            <h4 class="text-white font-bold">Módulo 1</h4>
                            <p class="text-xs text-muted">Instalação e Introdução</p>
                        </div>
                    </div>
                    <a href="laravel-intro.html" class="px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white text-sm font-bold rounded-lg transition shadow-lg shadow-orange-500/20 flex items-center gap-2">
                        <i data-lucide="arrow-left" class="w-4 h-4"></i> Voltar
                    </a>
                </div>

                <div class="mt-8 flex justify-end">
                    <button onclick="showStep('step-controller')" class="bg-accent hover:bg-red-600 text-white px-8 py-4 rounded-xl font-bold transition flex items-center gap-2 shadow-lg shadow-accent/20 hover:shadow-accent/40 hover:-translate-y-1">
                        Iniciar Desenvolvimento <i data-lucide="arrow-right" class="w-5 h-5"></i>
                    </button>
                </div>
            </div>

            <div id="step-controller" class="step-content space-y-8">
                <div class="border-b border-border pb-6">
                    <h2 class="text-3xl font-bold text-white">Controller e Rotas</h2>
                    <p class="text-muted mt-2">O Controlador gerencia a lógica. As Rotas dizem qual controlador chamar.</p>
                </div>

                <div class="space-y-4">
                    <h3 class="text-white font-bold text-sm">1. Criar o Controller</h3>
                    <div class="bg-card rounded-lg border border-border overflow-hidden">
                        <pre class="!border-0"><code class="language-bash">php artisan make:controller TaskController</code></pre>
                    </div>

                    <h3 class="text-white font-bold text-sm mt-4">2. Definir Rotas (routes/web.php)</h3>
                    <div class="bg-card rounded-lg border border-border overflow-hidden">
                        <div class="px-4 py-2 border-b border-border bg-base/50 text-xs text-muted font-mono flex justify-between">
                            <span>routes/web.php</span>
                            <button onclick="copyToClipboard(this)" class="hover:text-white flex gap-1"><i data-lucide="copy" class="w-3 h-3"></i></button>
                        </div>
                        <pre class="!border-0"><code class="language-php"><span class="php-tag">&lt;?php</span>
<span class="keyword">use</span> App\Http\Controllers\TaskController;
<span class="keyword">use</span> Illuminate\Support\Facades\Route;

<span class="comment">// Define todas as rotas do CRUD automaticamente</span>
Route::<span class="func">get</span>(<span class="str">'/'</span>, [TaskController::<span class="class">class</span>, <span class="str">'index'</span>])-><span class="func">name</span>(<span class="str">'home'</span>);
Route::<span class="func">post</span>(<span class="str">'/task'</span>, [TaskController::<span class="class">class</span>, <span class="str">'store'</span>])-><span class="func">name</span>(<span class="str">'task.store'</span>);
Route::<span class="func">delete</span>(<span class="str">'/task/{id}'</span>, [TaskController::<span class="class">class</span>, <span class="str">'destroy'</span>])-><span class="func">name</span>(<span class="str">'task.destroy'</span>);
Route::<span class="func">patch</span>(<span class="str">'/task/{id}/toggle'</span>, [TaskController::<span class="class">class</span>, <span class="str">'toggle'</span>])-><span class="func">name</span>(<span class="str">'task.toggle'</span>);</code></pre>
                    </div>
                </div>

                <div class="flex justify-between pt-6">
                    <button onclick="showStep('step-intro')" class="text-muted hover:text-white px-4 py-2 text-sm flex items-center gap-2"><i data-lucide="arrow-left" class="w-4 h-4"></i> Voltar</button>
                    <button onclick="showStep('step-blade')" class="bg-card border border-border hover:border-accent hover:text-accent text-white px-6 py-2 rounded-lg text-sm font-medium transition flex items-center gap-2">Próximo: Blade Views <i data-lucide="arrow-right" class="w-4 h-4"></i></button>
                </div>
            </div>

            <div id="step-blade" class="step-content space-y-8">
                <div class="border-b border-border pb-6">
                    <h2 class="text-3xl font-bold text-white">Views com Blade</h2>
                    <p class="text-muted mt-2">Blade é o motor de template do Laravel. Ele permite usar PHP dentro do HTML de forma limpa.</p>
                </div>

                <div class="space-y-4">
                    <h3 class="text-white font-bold text-sm">resources/views/layout.blade.php</h3>
                    <p class="text-xs text-muted">Crie este arquivo para ser a "casca" do site.</p>
                    <div class="bg-card rounded-lg border border-border overflow-hidden">
                        <pre class="!border-0"><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Laravel Tasks&lt;/title&gt;
    &lt;script src="https://cdn.tailwindcss.com"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body class="bg-slate-900 text-white p-10"&gt;
    &lt;div class="max-w-2xl mx-auto"&gt;
        @yield('content')
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
                    </div>

                    <h3 class="text-white font-bold text-sm mt-4">resources/views/index.blade.php</h3>
                    <div class="bg-card rounded-lg border border-border overflow-hidden">
                        <pre class="!border-0"><code class="language-html">@extends('layout')

@section('content')
    &lt;h1 class="text-3xl font-bold mb-6"&gt;Minhas Tarefas&lt;/h1&gt;
    
    &lt;!-- Formulário virá aqui --&gt;
    
    &lt;div class="mt-6"&gt;
        @foreach($tasks as $task)
            &lt;div class="bg-slate-800 p-4 mb-2 rounded flex justify-between"&gt;
                {{ $task->name }}
            &lt;/div&gt;
        @endforeach
    &lt;/div&gt;
@endsection</code></pre>
                    </div>
                </div>

                <div class="flex justify-between pt-6">
                    <button onclick="showStep('step-controller')" class="text-muted hover:text-white px-4 py-2 text-sm flex items-center gap-2"><i data-lucide="arrow-left" class="w-4 h-4"></i> Voltar</button>
                    <button onclick="showStep('step-mysql')" class="bg-card border border-border hover:border-accent hover:text-accent text-white px-6 py-2 rounded-lg text-sm font-medium transition flex items-center gap-2">Próximo: MySQL <i data-lucide="arrow-right" class="w-4 h-4"></i></button>
                </div>
            </div>

            <div id="step-mysql" class="step-content space-y-8">
                <div class="border-b border-border pb-6">
                    <h2 class="text-3xl font-bold text-white">Conectando o Banco</h2>
                    <p class="text-muted mt-2">Configurando para rodar com XAMPP.</p>
                </div>

                <div class="bg-card p-6 rounded-xl border border-border">
                    <div class="flex items-center gap-4 mb-4">
                        <i data-lucide="settings" class="text-accent w-8 h-8"></i>
                        <div>
                            <h3 class="font-bold text-white">Arquivo .env</h3>
                            <p class="text-sm text-muted">Este arquivo fica na raiz do projeto. Ele guarda as senhas.</p>
                        </div>
                    </div>
                    
                    <div class="bg-black/30 p-4 rounded border border-border font-mono text-sm">
                        <span class="text-gray-500">DB_CONNECTION=</span>mysql<br>
                        <span class="text-gray-500">DB_HOST=</span>127.0.0.1<br>
                        <span class="text-gray-500">DB_PORT=</span>3306<br>
                        <span class="text-gray-500">DB_DATABASE=</span><span class="text-accent">laravel_tasks</span><br>
                        <span class="text-gray-500">DB_USERNAME=</span>root<br>
                        <span class="text-gray-500">DB_PASSWORD=</span><span class="text-gray-600">(vazio no xampp)</span>
                    </div>
                    
                    <div class="mt-4 p-3 bg-yellow-500/10 border border-yellow-500/20 text-yellow-400 text-sm rounded flex items-center gap-2">
                        <i data-lucide="alert-triangle" class="w-4 h-4"></i>
                        Lembre-se de criar o banco "laravel_tasks" no phpMyAdmin antes!
                    </div>
                </div>

                <div class="flex justify-between pt-6">
                    <button onclick="showStep('step-blade')" class="text-muted hover:text-white px-4 py-2 text-sm flex items-center gap-2"><i data-lucide="arrow-left" class="w-4 h-4"></i> Voltar</button>
                    <button onclick="showStep('step-migration')" class="bg-card border border-border hover:border-accent hover:text-accent text-white px-6 py-2 rounded-lg text-sm font-medium transition flex items-center gap-2">Próximo: Migrations <i data-lucide="arrow-right" class="w-4 h-4"></i></button>
                </div>
            </div>

            <div id="step-migration" class="step-content space-y-8">
                <div class="border-b border-border pb-6">
                    <h2 class="text-3xl font-bold text-white">Migrations</h2>
                    <p class="text-muted mt-2">Migrations são como "controle de versão" para seu banco de dados.</p>
                </div>

                <div class="space-y-4">
                    <h3 class="text-white font-bold text-sm">1. Criar o arquivo de Migration</h3>
                    <div class="bg-card rounded-lg border border-border overflow-hidden">
                        <pre class="!border-0"><code class="language-bash">php artisan make:migration create_tasks_table</code></pre>
                    </div>

                    <h3 class="text-white font-bold text-sm mt-4">2. Definir os Campos (database/migrations/xxxx_create_tasks_table.php)</h3>
                    <div class="bg-card rounded-lg border border-border overflow-hidden">
                        <pre class="!border-0"><code class="language-php"><span class="keyword">public function</span> <span class="func">up</span>(): <span class="keyword">void</span>
{
    Schema::<span class="func">create</span>(<span class="str">'tasks'</span>, <span class="keyword">function</span> (Blueprint <span class="var">$table</span>) {
        <span class="var">$table</span>-><span class="func">id</span>();
        <span class="var">$table</span>-><span class="func">string</span>(<span class="str">'name'</span>);
        <span class="var">$table</span>-><span class="func">text</span>(<span class="str">'description'</span>)-><span class="func">nullable</span>();
        <span class="var">$table</span>-><span class="func">string</span>(<span class="str">'category'</span>);
        <span class="var">$table</span>-><span class="func">boolean</span>(<span class="str">'status'</span>)-><span class="func">default</span>(<span class="keyword">false</span>);
        <span class="var">$table</span>-><span class="func">timestamps</span>();
    });
}</code></pre>
                    </div>

                    <h3 class="text-white font-bold text-sm mt-4">3. Rodar a Migration</h3>
                    <div class="bg-card rounded-lg border border-border overflow-hidden">
                        <pre class="!border-0"><code class="language-bash">php artisan migrate</code></pre>
                    </div>
                </div>

                <div class="flex justify-between pt-6">
                    <button onclick="showStep('step-mysql')" class="text-muted hover:text-white px-4 py-2 text-sm flex items-center gap-2"><i data-lucide="arrow-left" class="w-4 h-4"></i> Voltar</button>
                    <button onclick="showStep('step-seeder')" class="bg-card border border-border hover:border-accent hover:text-accent text-white px-6 py-2 rounded-lg text-sm font-medium transition flex items-center gap-2">Próximo: Seeder <i data-lucide="arrow-right" class="w-4 h-4"></i></button>
                </div>
            </div>

            <div id="step-seeder" class="step-content space-y-8">
                <div class="border-b border-border pb-6">
                    <h2 class="text-3xl font-bold text-white">Seeds</h2>
                    <p class="text-muted mt-2">Povoar o banco com dados falsos para teste.</p>
                </div>

                <div class="space-y-4">
                    <div class="bg-card rounded-lg border border-border overflow-hidden">
                        <pre class="!border-0"><code class="language-bash">php artisan make:seeder TaskSeeder</code></pre>
                    </div>

                    <div class="bg-card rounded-lg border border-border overflow-hidden">
                        <div class="px-4 py-2 border-b border-border bg-base/50 text-xs text-muted font-mono">database/seeders/TaskSeeder.php</div>
                        <pre class="!border-0"><code class="language-php"><span class="keyword">use</span> Illuminate\Support\Facades\DB;

<span class="keyword">public function</span> <span class="func">run</span>(): <span class="keyword">void</span>
{
    DB::<span class="func">table</span>(<span class="str">'tasks'</span>)-><span class="func">insert</span>([
        [
            <span class="str">'name'</span> => <span class="str">'Aprender Laravel'</span>,
            <span class="str">'description'</span> => <span class="str">'Estudar rotas e controllers'</span>,
            <span class="str">'category'</span> => <span class="str">'Estudo'</span>,
            <span class="str">'status'</span> => <span class="keyword">false</span>,
        ],
        [
            <span class="str">'name'</span> => <span class="str">'Comprar Café'</span>,
            <span class="str">'description'</span> => <span class="str">'Essencial para programar'</span>,
            <span class="str">'category'</span> => <span class="str">'Pessoal'</span>,
            <span class="str">'status'</span> => <span class="keyword">true</span>,
        ]
    ]);
}</code></pre>
                    </div>

                    <div class="bg-card rounded-lg border border-border overflow-hidden">
                        <pre class="!border-0"><code class="language-bash">php artisan db:seed --class=TaskSeeder</code></pre>
                    </div>
                </div>

                <div class="flex justify-between pt-6">
                    <button onclick="showStep('step-migration')" class="text-muted hover:text-white px-4 py-2 text-sm flex items-center gap-2"><i data-lucide="arrow-left" class="w-4 h-4"></i> Voltar</button>
                    <button onclick="showStep('step-crud')" class="bg-card border border-border hover:border-accent hover:text-accent text-white px-6 py-2 rounded-lg text-sm font-medium transition flex items-center gap-2">Próximo: CRUD <i data-lucide="arrow-right" class="w-4 h-4"></i></button>
                </div>
            </div>

            <div id="step-crud" class="step-content space-y-8">
                <div class="border-b border-border pb-6">
                    <h2 class="text-3xl font-bold text-white">CRUD com Upsert</h2>
                    <p class="text-muted mt-2">Vamos usar <code>updateOrCreate</code> para fazer Criar e Editar na mesma lógica.</p>
                </div>

                <div class="space-y-4">
                    <h3 class="text-white font-bold text-sm">App/Http/Controllers/TaskController.php</h3>
                    <div class="bg-card rounded-lg border border-border overflow-hidden">
                        <button onclick="copyToClipboard(this)" class="absolute top-2 right-2 text-xs text-muted hover:text-white">Copiar</button>
                        <pre class="!border-0"><code class="language-php"><span class="keyword">use</span> App\Models\Task; <span class="comment">// Crie o model: php artisan make:model Task</span>
<span class="keyword">use</span> Illuminate\Http\Request;

<span class="keyword">class</span> <span class="class">TaskController</span> <span class="keyword">extends</span> Controller
{
    <span class="keyword">public function</span> <span class="func">index</span>() {
        <span class="var">$tasks</span> = Task::<span class="func">orderBy</span>(<span class="str">'id'</span>, <span class="str">'desc'</span>)-><span class="func">get</span>();
        <span class="keyword">return</span> <span class="func">view</span>(<span class="str">'index'</span>, [<span class="str">'tasks'</span> => <span class="var">$tasks</span>]);
    }

    <span class="keyword">public function</span> <span class="func">store</span>(Request <span class="var">$request</span>) {
        <span class="comment">// Validação básica</span>
        <span class="var">$request</span>-><span class="func">validate</span>([
            <span class="str">'name'</span> => <span class="str">'required|max:255'</span>,
            <span class="str">'category'</span> => <span class="str">'required'</span>
        ]);

        <span class="comment">// UPSERT: Se tiver ID, atualiza. Se não, cria.</span>
        Task::<span class="func">updateOrCreate</span>(
            [<span class="str">'id'</span> => <span class="var">$request</span>-><span class="func">input</span>(<span class="str">'id'</span>)], 
            [
                <span class="str">'name'</span> => <span class="var">$request</span>-><span class="func">input</span>(<span class="str">'name'</span>),
                <span class="str">'description'</span> => <span class="var">$request</span>-><span class="func">input</span>(<span class="str">'description'</span>),
                <span class="str">'category'</span> => <span class="var">$request</span>-><span class="func">input</span>(<span class="str">'category'</span>)
            ]
        );

        <span class="keyword">return</span> <span class="func">redirect</span>()-><span class="func">route</span>(<span class="str">'home'</span>);
    }

    <span class="keyword">public function</span> <span class="func">destroy</span>(<span class="var">$id</span>) {
        Task::<span class="func">destroy</span>(<span class="var">$id</span>);
        <span class="keyword">return</span> <span class="func">redirect</span>()-><span class="func">route</span>(<span class="str">'home'</span>);
    }
}</code></pre>
                    </div>
                </div>

                <div class="flex justify-between pt-6">
                    <button onclick="showStep('step-seeder')" class="text-muted hover:text-white px-4 py-2 text-sm flex items-center gap-2"><i data-lucide="arrow-left" class="w-4 h-4"></i> Voltar</button>
                    <button onclick="showStep('step-features')" class="bg-card border border-border hover:border-accent hover:text-accent text-white px-6 py-2 rounded-lg text-sm font-medium transition flex items-center gap-2">Próximo: Busca & Toggle <i data-lucide="arrow-right" class="w-4 h-4"></i></button>
                </div>
            </div>

            <div id="step-features" class="step-content space-y-8">
                <div class="border-b border-border pb-6">
                    <h2 class="text-3xl font-bold text-white">Busca e Status</h2>
                    <p class="text-muted mt-2">Adicionando interatividade: pesquisar e marcar como feito.</p>
                </div>

                <div class="space-y-4">
                    <h3 class="text-white font-bold text-sm">1. Atualizando o Controller (Busca e Toggle)</h3>
                    <div class="bg-card rounded-lg border border-border overflow-hidden">
                        <pre class="!border-0"><code class="language-php"><span class="comment">// No método index()</span>
<span class="keyword">public function</span> <span class="func">index</span>(Request <span class="var">$request</span>) {
    <span class="var">$query</span> = Task::<span class="func">query</span>();

    <span class="keyword">if</span> (<span class="var">$request</span>-><span class="func">has</span>(<span class="str">'search'</span>)) {
        <span class="var">$query</span>-><span class="func">where</span>(<span class="str">'name'</span>, <span class="str">'like'</span>, <span class="str">'%'</span> . <span class="var">$request</span>->search . <span class="str">'%'</span>);
    }

    <span class="var">$tasks</span> = <span class="var">$query</span>-><span class="func">orderBy</span>(<span class="str">'id'</span>, <span class="str">'desc'</span>)-><span class="func">get</span>(); <span class="comment">// Vamos mudar isso em breve para paginate</span>
    <span class="keyword">return</span> <span class="func">view</span>(<span class="str">'index'</span>, [<span class="str">'tasks'</span> => <span class="var">$tasks</span>]);
}

<span class="comment">// Novo método toggle</span>
<span class="keyword">public function</span> <span class="func">toggle</span>(<span class="var">$id</span>) {
    <span class="var">$task</span> = Task::<span class="func">find</span>(<span class="var">$id</span>);
    <span class="var">$task</span>->status = !<span class="var">$task</span>->status; <span class="comment">// Inverte</span>
    <span class="var">$task</span>-><span class="func">save</span>();
    <span class="keyword">return</span> <span class="func">back</span>();
}</code></pre>
                    </div>
                </div>

                <div class="flex justify-between pt-6">
                    <button onclick="showStep('step-crud')" class="text-muted hover:text-white px-4 py-2 text-sm flex items-center gap-2"><i data-lucide="arrow-left" class="w-4 h-4"></i> Voltar</button>
                    <button onclick="showStep('step-pagination')" class="bg-card border border-border hover:border-accent hover:text-accent text-white px-6 py-2 rounded-lg text-sm font-medium transition flex items-center gap-2">Próximo: Paginação <i data-lucide="arrow-right" class="w-4 h-4"></i></button>
                </div>
            </div>

            <div id="step-pagination" class="step-content space-y-8">
                <div class="border-b border-border pb-6">
                    <h2 class="text-3xl font-bold text-white">Paginação</h2>
                    <p class="text-muted mt-2">Laravel torna paginação incrivelmente fácil. Basta trocar <code>get()</code> por <code>paginate()</code>.</p>
                </div>

                <div class="space-y-4">
                    <h3 class="text-white font-bold text-sm">1. No Controller</h3>
                    <div class="bg-card rounded-lg border border-border overflow-hidden">
                        <pre class="!border-0"><code class="language-php"><span class="comment">// Em vez de ->get(), use:</span>
<span class="var">$tasks</span> = <span class="var">$query</span>-><span class="func">orderBy</span>(<span class="str">'id'</span>, <span class="str">'desc'</span>)-><span class="func">paginate</span>(5);</code></pre>
                    </div>

                    <h3 class="text-white font-bold text-sm mt-4">2. Na View (index.blade.php)</h3>
                    <p class="text-xs text-muted">Adicione isso abaixo do foreach.</p>
                    <div class="bg-card rounded-lg border border-border overflow-hidden">
                        <pre class="!border-0"><code class="language-html">&lt;div class="mt-4"&gt;
    {{ $tasks-&gt;links() }}
&lt;/div&gt;</code></pre>
                    </div>
                    
                    <div class="bg-emerald-500/10 border border-emerald-500/20 p-4 rounded-lg flex items-start gap-3 mt-4">
                        <i data-lucide="check-circle" class="text-emerald-400 w-5 h-5 mt-0.5"></i>
                        <div>
                            <h4 class="text-emerald-400 font-bold text-sm">Módulo 2 Concluído!</h4>
                            <p class="text-sm text-muted">Você construiu um CRUD completo com busca, paginação e banco de dados real. No próximo módulo, focaremos em Autenticação (Login) e API.</p>
                        </div>
                    </div>
                </div>

                <div class="flex justify-between pt-6 pb-20">
                    <button onclick="showStep('step-features')" class="text-muted hover:text-white px-4 py-2 text-sm flex items-center gap-2"><i data-lucide="arrow-left" class="w-4 h-4"></i> Voltar</button>
                    <button onclick="showStep('step-intro')" class="bg-accent hover:bg-red-600 text-white px-6 py-2 rounded-lg text-sm font-medium transition flex items-center gap-2 shadow-lg shadow-accent/20">Reiniciar Módulo <i data-lucide="rotate-ccw" class="w-4 h-4"></i></button>
                </div>
            </div>

        </div>
    </main>

    <script>
        lucide.createIcons();

        function showStep(stepId) {
            document.querySelectorAll('.step-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));

            const content = document.getElementById(stepId);
            content.classList.remove('active');
            void content.offsetWidth;
            content.classList.add('active');

            document.querySelector('main').scrollTop = 0;

            const btn = document.querySelector(`button[onclick="showStep('${stepId}')"]`);
            if (btn) btn.classList.add('active');
        }

        function copyToClipboard(button) {
            const parent = button.closest('.rounded-lg');
            const codeBlock = parent.querySelector('code');
            const code = codeBlock.innerText;

            navigator.clipboard.writeText(code).then(() => {
                const originalContent = button.innerHTML;
                button.innerHTML = `<i data-lucide="check" class="w-3 h-3"></i>`;
                button.classList.add('text-green-400');
                lucide.createIcons();
                setTimeout(() => {
                    button.innerHTML = originalContent;
                    button.classList.remove('text-green-400');
                    lucide.createIcons();
                }, 2000);
            });
        }
    </script>
</body>

</html>